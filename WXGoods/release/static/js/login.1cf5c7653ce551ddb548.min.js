webpackJsonp([6,7],{

/***/ 136:
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
		value: true
	});
	
	var _extends2 = __webpack_require__(27);
	
	var _extends3 = _interopRequireDefault(_extends2);
	
	var _ajax = __webpack_require__(9);
	
	var _ajax2 = _interopRequireDefault(_ajax);
	
	var _envConfig = __webpack_require__(10);
	
	var _envConfig2 = _interopRequireDefault(_envConfig);
	
	var _utils = __webpack_require__(18);
	
	var _utils2 = _interopRequireDefault(_utils);
	
	var _loginConfig = __webpack_require__(33);
	
	var _loginConfig2 = _interopRequireDefault(_loginConfig);
	
	var _vuex = __webpack_require__(25);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	var env = 'product';
	exports.default = {
		name: 'login',
		data: function data() {
			return {
				pageRouter: {
					home: '#/home',
					detail: '#/detail',
					order: '#/order',
					profile: '#/profile',
					stuff: '#/stuff',
					treasure: '#/treasure'
				}
			};
		},
		created: function created() {
			var _vue = this;
	
			var page = this.$route.query.pageType == '' ? 'home' : this.$route.query.pageType;
			var code = '';
			if (window.location.href.indexOf('code=') != -1) {
				code = window.location.href.split('code=')[1].split('&state')[0];
			}
	
			if (code != '') {
				_vue.$ajax.get(_envConfig2.default.getApi(env, "login"), {
					params: {
						code: code
					}
				}).then(function (res) {
					if (res.data.code == 0) {
						window.location.href = window.location.origin + window.location.pathname + _vue.pageRouter[page];
					} else if (res.data.code == 201) {
						var redirectUri = window.location.origin + window.location.pathname + '/#login?pageType=' + page;
						redirectUri = encodeURIComponent(redirectUri);
						window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + _vue.appId + '&redirect_uri=' + redirectUri + '&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect';
					}
				});
			}
		},
	
		computed: (0, _extends3.default)({}, (0, _vuex.mapState)(['appId']))
	};

/***/ },

/***/ 202:
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(1)();
	// imports
	
	
	// module
	exports.push([module.id, "\n.commend {\n  position: absolute;\n  top: 40%;\n  left: 30%;\n}\n", "", {"version":3,"sources":["/./src/pages/login/index.vue"],"names":[],"mappings":";AACA;EACE,mBAAmB;EACnB,SAAS;EACT,UAAU;CACX","file":"index.vue","sourcesContent":["\n.commend {\n  position: absolute;\n  top: 40%;\n  left: 30%;\n}\n"],"sourceRoot":"webpack://"}]);
	
	// exports


/***/ },

/***/ 226:
/***/ function(module, exports, __webpack_require__) {

	
	/* styles */
	__webpack_require__(247)
	
	var Component = __webpack_require__(2)(
	  /* script */
	  __webpack_require__(136),
	  /* template */
	  __webpack_require__(238),
	  /* scopeId */
	  null,
	  /* cssModules */
	  null
	)
	
	module.exports = Component.exports


/***/ },

/***/ 238:
/***/ function(module, exports) {

	module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
	  return _c('div', {
	    staticClass: "commend"
	  }, [_vm._v("页面跳转中，请稍后...")])
	},staticRenderFns: []}

/***/ },

/***/ 247:
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(202);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(3)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-eea924dc!../../../node_modules/less-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue", function() {
				var newContent = require("!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-eea924dc!../../../node_modules/less-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ }

});
//# sourceMappingURL=login.1cf5c7653ce551ddb548.min.js.map